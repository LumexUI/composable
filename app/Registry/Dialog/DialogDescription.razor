@namespace LumexUI.Composable.Registry

@using TailwindMerge

<p class="@TwMerge.Merge( ClassName, Class )"
   data-slot="dialog-description"
   @attributes="@AdditionalAttributes">
    @ChildContent
</p>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }

    [Parameter] public string? Class { get; set; }

    [Parameter( CaptureUnmatchedValues = true )]
    public IReadOnlyDictionary<string, object>? AdditionalAttributes { get; set; }

    [CascadingParameter] private Dialog Context { get; set; } = default!;

    [Inject] public TwMerge TwMerge { get; set; } = default!;

    protected override void OnInitialized()
    {
        if( Context is null )
        {
            throw new InvalidOperationException(
                $"<{nameof( DialogDescription )} /> must be used within a <{nameof( Dialog )} /> component."
            );
        }
    }

    /*
     * ----------------------------------------------------------------------------------
     * Styles
     * ----------------------------------------------------------------------------------
     */

    private string? ClassName => new ElementClass( "text-muted-foreground *:[a]:hover:text-foreground text-sm *:[a]:underline *:[a]:underline-offset-3" );
}
