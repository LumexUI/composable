@namespace LumexUI.Composable.Registry

@using TailwindMerge

<div role="group"
     class="@TwMerge.Merge(ClassName, Class)"
     data-slot="field"
     data-orientation="@Orientation.ToString().ToLower()"
     @attributes="@AdditionalAttributes">
    @ChildContent
</div>

@code {
    [Parameter] public RenderFragment? ChildContent { get; set; }

    [Parameter] public FieldOrientation Orientation { get; set; } = FieldOrientation.Vertical;

    [Parameter] public string? Class { get; set; }

    [Parameter( CaptureUnmatchedValues = true )]
    public IReadOnlyDictionary<string, object>? AdditionalAttributes { get; set; }

    [Inject] public TwMerge TwMerge { get; set; } = default!;

    /*
     * ----------------------------------------------------------------------------------
     * Styles
     * ----------------------------------------------------------------------------------
     */
   
    private string? ClassName => new ElementClass( "data-[invalid=true]:text-destructive gap-2 group/field flex w-full" )
        // Orientation
        .Add( "flex-col [&>*]:w-full [&>.sr-only]:w-auto", when: Orientation is FieldOrientation.Vertical )
        .Add( "flex-row items-center [&>[data-slot=field-label]]:flex-auto has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px", when: Orientation is FieldOrientation.Horizontal )
        .Add( "flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto @md/field-group:[&>[data-slot=field-label]]:flex-auto @md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px", when: Orientation is FieldOrientation.Responsive );
}
